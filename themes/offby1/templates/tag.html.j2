{% extends "base.html.j2" %}

{% block title %}{{ tag }} - {{ SITENAME }}{% endblock %}
{% block body_class %}tag-page{% endblock %}

{% block content %}
<div class="section-header">
    <h1>Posts tagged "{{ tag }}"</h1>
    <p>{{ articles|length }} post{% if articles|length != 1 %}s{% endif %}</p>
</div>

<div class="recent-posts-grid">
    {% for article in articles %}
    <article class="post-card">
        <h4><a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a></h4>
        <div class="meta">
            <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
            {% if article.category %} Â· {{ article.category }}{% endif %}
        </div>
        {% if article.summary %}
        <p class="excerpt">{{ article.summary | striptags | truncate(150) }}</p>
        {% else %}
        <p class="excerpt">{{ article.content | striptags | truncate(150) }}</p>
        {% endif %}
        {% if article.tags %}
        <div class="tags">
            {% for tag in article.tags[:3] %}
            <a href="{{ SITEURL }}/{{ tag.url }}" class="tag">{{ tag }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </article>
    {% endfor %}
</div>
{% endblock %}
